<script nonce={{ cspNonce | dump | safe }}>
  document.addEventListener("DOMContentLoaded", function () {
    if (!window.location.href.includes("cidev")) {
      return; // Don't run tracking logic unless in "cidev" environment
    }
    
    var submitBtn = document.getElementById("submit");

    if (!submitBtn) {
      console.warn("Submit button not found.");
      return;
    }

    submitBtn.addEventListener("click", function (event) {
      var selected = document.querySelector('input[name="required_information"]:checked');
      if (!selected) {
        return; 
      }

      event.preventDefault();

      if (window._paq) {
        if (selected.value === "1") {
          _paq.push(["trackGoal", 55]);
        } else if (selected.value === "0") {
          _paq.push(["trackGoal", 118]);
        }
      }

      submitBtn.click();
    }, { once: true }); 
  });
</script>
