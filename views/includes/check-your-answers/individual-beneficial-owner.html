{% import "includes/date-macros.html" as dateMacros %}

{% set fullName = boi.first_name + " " + boi.last_name %}

{% set dateOfBirth = dateMacros.formatDate(boi.date_of_birth["day"], boi.date_of_birth["month"], boi.date_of_birth["year"]) %}

{% set startDate = dateMacros.formatDate(boi.start_date["day"], boi.start_date["month"], boi.start_date["year"]) %}

{% set formattedResidentialAddressHtml %}
  {% set address = boi.usual_residential_address %}
  {% include "includes/display_address.html" %}
{% endset %}

{% set formattedServiceAddressHtml %}
  {% if boi.is_service_address_same_as_usual_residential_address == 1 %}
    The correspondence address is the same as the usual residential address
  {% else %}
    {% set address = boi.service_address %}
    {% include "includes/display_address.html" %}
  {% endif %}
{% endset %}

{% set beneficialOwnerIndividualNOCs %}
  {% for bonoc in boi.beneficial_owner_nature_of_control_types %}
    <ul>
      {% if bonoc == "OVER_25_PERCENT_OF_SHARES" %}
        <li>Holds, directly or indirectly, more than 25% of the shares in the entity</li>
      {% elif bonoc == "OVER_25_PERCENT_OF_VOTING_RIGHTS" %}
        <li>Holds, directly or indirectly, more than 25% of the voting rights in the entity</li>
      {% elif bonoc == "APPOINT_OR_REMOVE_MAJORITY_BOARD_DIRECTORS" %}
        <li>Holds the right, directly or indirectly, to appoint or remove a majority of the board of directors of the entity</li>
      {% elif bonoc == "SIGNIFICANT_INFLUENCE_OR_CONTROL" %}
        <li>Has the right to exercise, or actually exercises, significant influence or control over the entity</li>
      {% endif %}
    </ul>
  {% endfor %}
{% endset %}

{% set beneficialOwnerTrusteeNOCs %}
  {% for bonoc in boi.trustees_nature_of_control_types %}
    <ul>
      {% if bonoc == "OVER_25_PERCENT_OF_SHARES" %}
        <li>The trustees of that trust (in their capacity as such) hold, directly or indirectly, more than 25% of the shares in the entity</li>
      {% elif bonoc == "OVER_25_PERCENT_OF_VOTING_RIGHTS" %}
        <li>The trustees of that trust (in their capacity as such) hold, directly or indirectly, more than 25% of the voting rights in the entity</li>
      {% elif bonoc == "APPOINT_OR_REMOVE_MAJORITY_BOARD_DIRECTORS" %}
        <li>The trustees of that trust (in their capacity as such) hold the right, directly or indirectly, to appoint or remove a majority of the board of directors of the company</li>
      {% elif bonoc == "SIGNIFICANT_INFLUENCE_OR_CONTROL" %}
        <li>the trustees of that trust (in their capacity as such) have the right to exercise, or actually exercise, significant influence or control over the company</li>
      {% endif %}
    </ul>
  {% endfor %}
{% endset %}

{% set beneficialOwnerNonLegalFirmNOCs %}
  {% for bonoc in boi.non_legal_firm_members_nature_of_control_types %}
    <ul>
      {% if bonoc == "OVER_25_PERCENT_OF_SHARES" %}
        <li>The members of that firm (in their capacity as such) hold, directly or indirectly, more than 25% of the shares in the entity</li>
      {% elif bonoc == "OVER_25_PERCENT_OF_VOTING_RIGHTS" %}
        <li>The members of that firm (in their capacity as such) hold, directly or indirectly, more than 25% of the voting rights in the entity</li>
      {% elif bonoc == "APPOINT_OR_REMOVE_MAJORITY_BOARD_DIRECTORS" %}
        <li>The members of that firm (in their capacity as such) hold the right, directly or indirectly, to appoint or remove a majority of the board of directors of the company</li>
      {% elif bonoc == "SIGNIFICANT_INFLUENCE_OR_CONTROL" %}
        <li>The members of that firm (in their capacity as such) have the right to exercise, or actually exercise, significant influence or control over the company</li>
      {% endif %}
    </ul>
  {% endfor %}
{% endset %}

{% set beneficialOwnerNOCsHTML = beneficialOwnerIndividualNOCs + beneficialOwnerTrusteeNOCs + beneficialOwnerNonLegalFirmNOCs %}

{% set isOnSanctionsListHtml %}
  {% if boi.is_on_sanctions_list == 1 %}
    Yes
  {% else %}
    No
  {% endif %}
{% endset %}

<h3 class="govuk-heading-m">Individual beneficial owner</h3>

{{ govukSummaryList({
  rows: [
    {
      key: {
        text: "Name"
      },
      value: {
        text: fullName
      }
    },
    {
      key: {
        text: "Date of birth"
      },
      value: {
        text: dateOfBirth
      }
    },
    {
      key: {
        text: "Nationality"
      },
      value: {
        text: boi.nationality
      }
    },
    {
      key: {
        text: "Home address"
      },
      value: {
        html: formattedResidentialAddressHtml
      }
    },
    {
      key: {
        text: "Correspondence address"
      },
      value: {
        html: formattedServiceAddressHtml
      }
    },
    {
      key: {
        text: "Date they became a beneficial owner"
      },
      value: {
        text: startDate
      }
    },
    {
      key: {
        text: "Nature of control"
      },
      value: {
        html: beneficialOwnerNOCsHTML
      }
    },
    {
      key: {
        text: "Are they on the sanctions list?"
      },
      value: {
        html: isOnSanctionsListHtml
      }
    }
  ]
}) }}
